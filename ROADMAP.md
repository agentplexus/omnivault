# OmniVault Roadmap

This roadmap documents planned and completed features for this project.

The format is based on and generated by [Structured Roadmap](https://github.com/grokify/structured-roadmap), which provides a machine-readable JSON intermediate representation with deterministic Markdown generation.

## Overview

| Item | Status | Priority | Area |
|------|--------|----------|------|
| HTTP server over Unix socket | âœ… | High | Daemon |
| Secret list UI | ðŸ“‹ | High | UI |
| URI-based resolver | âœ… | High | Core Library |
| External provider module architecture | âœ… | High | Providers |
| Lock/unlock session management | âœ… | High | Daemon |
| Swift state management | ðŸ“‹ | High | UI |
| AES-256-GCM encryption with Argon2id key derivation | âœ… | High | Security |
| Encrypted file store implementing `vault.Vault` | âœ… | High | Security |
| Master password protection | âœ… | High | Security |
| Swift Unix socket client | ðŸ“‹ | High | UI |
| Platform-specific paths (~/.omnivault/) | âœ… | High | Daemon |
| CLI entrypoint | âœ… | High | CLI |
| Built-in providers (env, file, memory) | âœ… | High | Providers |
| Core `vault.Vault` interface | âœ… | High | Core Library |
| IPC protocol definitions | âœ… | High | Daemon |
| Secret commands (get, set, list, delete) | âœ… | High | CLI |
| Vault commands (init, lock, unlock, status) | âœ… | High | CLI |
| Daemon control commands | âœ… | High | CLI |
| Unix socket client | âœ… | High | Client |
| Swift models for secret info and vault status | ðŸ“‹ | High | UI |
| Automatic daemon startup on first use | ðŸ“‹ | Medium | Client |
| Configurable auto-lock timeout | âœ… | Medium | Security |
| omnivault-keyring provider module | âœ… | Medium | Providers |
| omnivault-aws provider module | âœ… | Medium | Providers |
| Lock/unlock UI | ðŸ“‹ | Medium | UI |
| Add/edit secret UI | ðŸ“‹ | Medium | UI |
| Connection pooling | ðŸ“‹ | Low | Client |

---

## Overview

OmniVault is a unified Go library for secret management. This roadmap covers the evolution from a library to a complete local secret management solution with daemon and CLI.

---

## Core Library

### [x] Core `vault.Vault` interface

**Version:** v0.1.0

### [x] URI-based resolver

**Version:** v0.1.0

---

## Providers

### [x] Built-in providers (env, file, memory)

**Version:** v0.1.0

### [x] External provider module architecture

**Version:** v0.1.0

### [x] omnivault-aws provider module

**Version:** v0.1.0

### [x] omnivault-keyring provider module

**Version:** v0.1.0

---

## Security

### [x] AES-256-GCM encryption with Argon2id key derivation

`internal/store/crypto.go`

**Version:** v0.2.0

### [x] Encrypted file store implementing `vault.Vault`

`internal/store/encrypted.go`

**Version:** v0.2.0

### [x] Master password protection

**Version:** v0.2.0

### [x] Configurable auto-lock timeout

**Version:** v0.2.0

---

## Daemon

### [x] HTTP server over Unix socket

`internal/daemon/server.go`

**Version:** v0.2.0

### [x] IPC protocol definitions

`internal/daemon/protocol.go`

**Version:** v0.2.0

### [x] Lock/unlock session management

**Version:** v0.2.0

### [x] Platform-specific paths (~/.omnivault/)

`internal/config/paths.go`

**Version:** v0.2.0

---

## CLI

### [x] CLI entrypoint

`cmd/omnivault/main.go`

**Version:** v0.2.0

### [x] Daemon control commands

`cmd/omnivault/daemon.go`

**Version:** v0.2.0

### [x] Secret commands (get, set, list, delete)

`cmd/omnivault/secrets.go`

**Version:** v0.2.0

### [x] Vault commands (init, lock, unlock, status)

`cmd/omnivault/init.go`

**Version:** v0.2.0

---

## Client

### [x] Unix socket client

`internal/client/client.go`

**Version:** v0.2.0

### [ ] Automatic daemon startup on first use

### [ ] Connection pooling

---

## UI

### [ ] Secret list UI

`VaultView.swift`

### [ ] Swift Unix socket client

`VaultDaemonClient.swift`

### [ ] Swift models for secret info and vault status

`VaultModels.swift`

### [ ] Swift state management

`VaultManager.swift`

### [ ] Add/edit secret UI

### [ ] Lock/unlock UI

---

## Daemon API

| Endpoint | Method | Description |
|--------|--------|--------|
| `/status` | GET | Daemon status (running, locked, secret count) |
| `/secrets` | GET | List all secrets (metadata only) |
| `/secret/:path` | GET | Get secret value |
| `/secret/:path` | PUT | Set secret |
| `/secret/:path` | DELETE | Delete secret |
| `/lock` | POST | Lock the vault |
| `/unlock` | POST | Unlock with master password |

## Socket Path

| Platform | Path |
|--------|--------|
| macOS/Linux | `~/.omnivault/omnivaultd.sock` |
| Windows | `\\.\pipe\omnivault` |

## CLI Commands

```bash
# Vault initialization
omnivault init                    # Initialize new vault with master password

# Secret operations
omnivault set <path> [value]      # Set secret (prompts if no value)
omnivault get <path>              # Get secret value
omnivault list [prefix]           # List secrets
omnivault delete <path>           # Delete secret

# Vault control
omnivault lock                    # Lock the vault
omnivault unlock                  # Unlock with master password
omnivault status                  # Show vault status

# Daemon control
omnivault daemon start            # Start daemon
omnivault daemon stop             # Stop daemon
omnivault daemon status           # Daemon status
```

## Security Model

### Encryption

- **Algorithm**: AES-256-GCM (authenticated encryption)
- **Key Derivation**: Argon2id (memory-hard, resistant to GPU attacks)
- **Salt**: Random 32 bytes per vault
- **Nonce**: Random 12 bytes per secret

### Master Password

- Never stored, only used to derive encryption key
- Minimum 8 characters enforced
- Session-based unlock with configurable timeout

### Storage

- Encrypted vault file: `~/.omnivault/vault.enc`
- Metadata stored separately: `~/.omnivault/vault.meta`
- No plaintext secrets on disk

## Data Format

### Vault File Structure

```
~/.omnivault/
â”œâ”€â”€ vault.enc           # Encrypted secrets (AES-256-GCM)
â”œâ”€â”€ vault.meta          # Unencrypted metadata (salt, created date)
â”œâ”€â”€ omnivaultd.sock     # Unix socket (runtime)
â””â”€â”€ omnivaultd.pid      # Daemon PID file (runtime)
```

### Secret Metadata (in vault.meta)

```json
{
  "version": 1,
  "created_at": "2024-01-01T00:00:00Z",
  "salt": "base64-encoded-salt",
  "argon2_params": {
    "time": 3,
    "memory": 65536,
    "threads": 4
  }
}
```

---

## Version History

| Version | Date | Status | Summary |
|---------|------|--------|--------|
| v0.2.0 | 2026-01-10 | âœ… | CLI, daemon, encrypted store |
| v0.1.0 | 2025-01-01 | âœ… | Core library with providers |
